# SQL Part 1 - Basic Queries

## Lingo

Relational databases are made of tables (relations). A table has a name (ie Person) and looks like this:

| name | age | num_dogs | 
| --- | --- | --- |
| Ace | 20 | 4 |
| Ada | 18 | 3 |
| Ben | 7 | 2 |
| Cho | 27 | 3 |

Tables have rows (tuples) and columns (attributes). In this example, the columns or attributes are `name`, `age`, `num_dogs`.

## Querying a Table
The most fundamental SQL query looks like this:

```
SELECT <column>
FROM <tbl>
```

The `FROM` clause tells us which table you're interested in and the `SELECT` clause tells SQL which columns of that table you want to see. For example, consider a table Person(`name`, `age`, `num_dogs`) containing the data above.

if we execute:

```
SELECT name , num_dogs
FROM Person ;
```

We will get:


| name  | num_dogs | 
| --- | --- |
| Ace  | 4 |
| Ada  | 3 |
| Ben  | 2 |
| Cho  | 3 |

Optionally, we could add a `DISTINCT` keyword to the `SELECT` statement which removes duplicate rows before output. But running this againt our query would not yield a different ouptput as all results are the same.

In SQL, however, the order of the rows, like a hashset, is nondeterministic unless the query contains an `ORDER BY`. So the above output is not the only possible output.

## Filtering out uninteresting rows

Frequently we are interested in only a subset of the data available to us. That is, even though we might have data about many peple or things, we often only want to see the data that we have about very specific people or things. This is where the `WHERE` clause comes in handy; it lets us specifiy which specific rows of our table we're interested in. Here's the syntax:

```
SELECT <columns>
FROM <tbl>
WHERE <predicate> ;
```

Let's consider our table Person(name, age, num_dogs). Suppose we want to see how many dogs each person owns -- same as before -- but this time we only care about the dog-owners who are adults. We can write:

```
SELECT name, num_dogs
FROM Person
WHERE age >= 18 ;
```

The best way to think about the ordering of this for us humans is to go in the exact order we read line by line and running the SELECT clause last. We will see later on that the database may not do this internally, but that is how we should approach understanding how this query works.

### Boolean operators

If you want to filter on more complicated predicates, use boolean operators like `NOT`, `AND`, and `OR`. For instance,

```
SELECT name, num_dogs
FROM Person
WHERE age >= 18
AND num_dogs > 3;
```

### Filtering Null Values

In SQL, there is a special value called NULL, which can be used as a value for any data type, and represents an "unknown" or "missing" value.

Bear in mind that some values in your DB may be NULL whether you like it or not, so it's good to know how SQL handles them. It pretty much boils down to the following rules:

- If you do anything with NULL, you'll just get NULL. For instance if x is NULL, then x > 3, 1 = x, and x + 4 all evaluate to NULL. Even x = NULL would evaluate to NULL. if you want to check whether x is NULL, then write x IS NULL or x IS NOT NULL instead.
- NULL is falsey meaning that `where NULL` is just like `WHERE FALSE`. The row won't get included.
- True or NULL --> True
- False or NULL --> False
- NULL --> NULL

Let's walk through this query as an example:

```
SELECT name, num_dogs
FROM Person
WHERE age <= 20
OR num_dogs = 3;
```

This table below has some NULLs now.

| name | age | num_dogs |
| --- | --- | --- |
| Ace	| 20 | 4 |
| Ada	| NULL | 3 |
| Ben | NULL | NULL |
| Cho | 27 | NULL |


Running the WHERE clause requires us to find people who are age <= 20 and there is only 1 search person, Ace. However, we must also include people whos num_dogs = 3 which is Ada. So Ace and Ada will be in our output. The others either evaluate to NULL or NULL which is NULL or False or NULL which is False, both of which are falsey so not included in the output.

## Grouping and Aggregation

### Summarizing columns of data

With SQL you are able to summarize entire columns of data using built-in aggregate functions. The most common ones are `SUM`, `AVG`, `MAX`, `MIN`, `COUNT`. here are some important characteristics of aggregate functions:

- The input to an aggregate function is the name of a column, and the output is a single value that summarizes all the data within that column.
- Every aggregate ignores NULL values except for `COUNT(*)`. So `COUNT(<column>)` returns the number of non-NULL values in the specified columns whereas `COUNT(*)` counts number of non-NULL values in the specified columns.

Example query may look like:

```
SELECT MAX(age) - MIN(age)
FROM Person;
```

### Summarizing Groups of Data
Now you know how to summarize an entire column of your database into a single number. More often than not, though, we want a little finer granularity than that. This is possible with the `GROUP BY` clause which allows us to split our data into groups and then summarize each group seprately. Here's the syntax:

```
SELECT <columns>
FROM <tbl>
WHERE <predicate> -- Filter out rows (before grouping).
GROUP BY <columns>
HAVING <predicate>; -- Filter out groups (after grouping).
```



###



